# ุจุฑููุจุช ุดุงูู ููุธุงู ุงูุชุฑุงุฎูุต ูุงูุญูุงูุฉ

## ุงููุทููุจ
ุฃุฑูุฏ ููู ุฅูุดุงุก ูุธุงู ุชุฑุฎูุต ูุชูุงูู ูุขูู ูุชุทุจูู Electron ูุชุถูู ุฌููุน ุงูููููุงุช ุงูุชุงููุฉ:

## 1. ูุฏูุฑ ุงูุชุฑุงุฎูุต ุงูุฑุฆูุณู (License Manager)

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ:
- **ุงูุญุตูู ุนูู ุงููุนุฑู ุงููุฑูุฏ ููุญุงุณูุจ**: ุงุณุชุฎุฏุงู ููุชุจุฉ `node-machine-id` ููุญุตูู ุนูู ูุนุฑู ูุฑูุฏ ููุฌูุงุฒ
- **ุชุดููุฑ ุงูุจูุงูุงุช**: ุชุดููุฑ ููู ุจุงุณุชุฎุฏุงู AES-256-GCM ูุน ููุงุชูุญ ูุดุชูุฉ ูู PBKDF2
- **ุชุฎุฒูู ุขูู**: ุญูุธ ุจูุงูุงุช ุงูุชุฑุฎูุต ูุดูุฑุฉ ูุญููุงู ุจุงุณุชุฎุฏุงู `electron-store` ุฃู ูุธุงู ูููุงุช ุขูู
- **ุฑุจุท ุงูุชุฑุฎูุต ุจุงูุฌูุงุฒ**: ุฑุจุท ูู ุชุฑุฎูุต ุจูุนุฑู ุงูุฌูุงุฒ ุงููุฑูุฏ ูููุน ุงููุณุฎ

### ุงููุธุงุฆู ุงููุทููุจุฉ:
```javascript
class LicenseManager {
  // ุฅูุดุงุก ูุนุฑู ูุฑูุฏ ููุฌูุงุฒ
  generateHWID()
  
  // ุงูุชุญูู ูู ุตุญุฉ ุชูุณูู ููุชุงุญ ุงูุชุฑุฎูุต
  validateLicenseFormat(licenseKey)
  
  // ุชูุนูู ุชุฑุฎูุต ุฌุฏูุฏ
  activateLicense(licenseKey)
  
  // ุงูุชุญูู ูู ุตุญุฉ ุงูุชุฑุฎูุต ุงููุญููุธ
  validateStoredLicense()
  
  // ุญูุธ ุจูุงูุงุช ุงูุชุฑุฎูุต ูุดูุฑุฉ
  storeLicense(licenseKey, hwid)
  
  // ุชุดููุฑ ููู ุชุดููุฑ ุงูุจูุงูุงุช
  encryptLicenseData(data)
  decryptLicenseData(encryptedData)
  
  // ุฅุฒุงูุฉ ุงูุชุฑุฎูุต
  removeLicense()
  
  // ุงูุญุตูู ุนูู ูุนูููุงุช ุงูุชุฑุฎูุต
  getLicenseInfo()
}
```

## 2. ูููุฏ ููุงุชูุญ ุงูุชุฑุฎูุต

### ุฃููุงุน ุงูููุงุชูุญ ุงููุทููุจุฉ:
- **ููุงุชูุญ ุงูุฅูุชุงุฌ**: ููุงุชูุญ ุนุดูุงุฆูุฉ ุขููุฉ ููุจูุน ุงูุชุฌุงุฑู
- **ููุงุชูุญ ูุญุฏุฏุฉ ูุณุจูุงู**: ููุงุชูุญ ุซุงุจุชุฉ ููุงุฎุชุจุงุฑ ูุงูุนุฑูุถ ุงูุชูุถูุญูุฉ
- **ููุงุชูุญ ูุฑุชุจุทุฉ ุจุงูุฌูุงุฒ**: ููุงุชูุญ ูููุฏุฉ ุฎุตูุตุงู ูุฌูุงุฒ ูุนูู

### ุงูุชูุณูู ุงููุทููุจ:
- ุชูุณูู: `XXXXX-XXXXX-XXXXX-XXXXX`
- ุฃุญุฑู ูุฃุฑูุงู ูุจูุฑุฉ ููุท
- ุทูู ูู ูุทุนุฉ: 4-5 ุฃุญุฑู
- ูุซุงู: `DENTA-CLINI-C2025-MAIN1`

### ูุฆุงุช ุงูููุงุชูุญ:
```javascript
const LICENSE_CATEGORIES = {
  main: 'ููุงุชูุญ ุงูุนูุงุฏุงุช ุงูุฑุฆูุณูุฉ',
  professional: 'ููุงุชูุญ ุงุญุชุฑุงููุฉ', 
  trial: 'ููุงุชูุญ ุชุฌุฑูุจูุฉ ููุคูุชุฉ',
  premium: 'ููุงุชูุญ VIP ููููุฒุฉ',
  regional: 'ููุงุชูุญ ุงูููุงุทู ุงูุฌุบุฑุงููุฉ',
  partners: 'ููุงุชูุญ ุงูุดุฑูุงุก'
}
```

## 3. ูุธุงู ุชุชุจุน ุงูููุงุชูุญ ุงููุณุชุฎุฏูุฉ

### ุงููุชุทูุจุงุช:
- **ููุน ุงูุงุณุชุฎุฏุงู ุงููุชูุฑุฑ**: ุชุชุจุน ุงูููุงุชูุญ ุงููุณุชุฎุฏูุฉ ูููุน ุงุณุชุฎุฏุงููุง ุนูู ุฃุฌูุฒุฉ ูุชุนุฏุฏุฉ
- **ุชุดููุฑ ุงูุจูุงูุงุช**: ุชุดููุฑ ูุนูููุงุช ุงูููุงุชูุญ ุงููุณุชุฎุฏูุฉ
- **ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู**: ุชุชุจุน ุฅุญุตุงุฆูุงุช ููุตูุฉ ุนู ุงุณุชุฎุฏุงู ุงูููุงุชูุญ

### ุงููุธุงุฆู ุงููุทููุจุฉ:
```javascript
class UsedLicensesTracker {
  // ุงูุชุญูู ูู ุชููุฑ ุงูููุชุงุญ
  isLicenseAvailable(licenseKey, currentHWID)
  
  // ุชุณุฌูู ุงุณุชุฎุฏุงู ููุชุงุญ
  markLicenseAsUsed(licenseKey, hwid, additionalData)
  
  // ุชุญุฏูุซ ุขุฎุฑ ุชุญูู
  updateLastValidation(licenseKey, hwid)
  
  // ุชุญุฑูุฑ ููุชุงุญ (ุฅูุบุงุก ุฑุจุทู)
  releaseLicense(licenseKey)
  
  // ุงูุญุตูู ุนูู ูุนูููุงุช ุงูุงุณุชุฎุฏุงู
  getUsedLicenseInfo(licenseKey)
  
  // ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู
  getUsageStatistics()
}
```

## 4. ูููุฏ ุงูููุงุชูุญ ุงููุฑุชุจุทุฉ ุจุงูุฌูุงุฒ

### ุงููุชุทูุจุงุช:
- **ุฎูุงุฑุฒููุฉ ุฑูุงุถูุฉ**: ุฅูุดุงุก ููุงุชูุญ ุจุงุณุชุฎุฏุงู ุฎูุงุฑุฒููุฉ ุฑูุงุถูุฉ ูุนูุฏุฉ
- **ุฑุจุท ุจุงูุฌูุงุฒ**: ูู ููุชุงุญ ูุนูู ููุท ุนูู ุงูุฌูุงุฒ ุงููุญุฏุฏ
- **ุฃูุงู ุนุงูู**: ุญูุงูุฉ ูุตูู ุถุฏ ุงููุณุฎ ูุงููุฑุตูุฉ

### ุงููุธุงุฆู ุงููุทููุจุฉ:
```javascript
class DeviceBoundLicenseGenerator {
  // ุงูุญุตูู ุนูู ูุนุฑู ุงูุฌูุงุฒ ุงูุญุงูู
  getCurrentDeviceId()
  
  // ุฅูุดุงุก ููุชุงุญ ูุฑุชุจุท ุจุฌูุงุฒ
  generateDeviceBoundLicense(deviceId, metadata)
  
  // ุงูุชุญูู ูู ุตุญุฉ ุงูููุชุงุญ ุงููุฑุชุจุท
  validateDeviceBoundLicense(licenseKey, deviceId)
  
  // ุฅูุดุงุก ููุชุงุญ ุจุงุณุชุฎุฏุงู ุฎูุงุฑุฒููุฉ ุฑูุงุถูุฉ
  generateAlgorithmicKey(deviceId, metadata)
}
```

## 5. ูุฏูู ููุงุชูุญ ุงูุฅูุชุงุฌ

### ุงููุชุทูุจุงุช:
- **ุชุญููู ูู ููู**: ูุฑุงุกุฉ ููุงุชูุญ ุงูุฅูุชุงุฌ ูู ููู JSON
- **ุงูุชุญูู ุงูุณุฑูุน**: ูุญุต ุณุฑูุน ูุตุญุฉ ุงูููุงุชูุญ
- **ูุนูููุงุช ููุตูุฉ**: ุงูุญุตูู ุนูู ุชูุงุตูู ูู ููุชุงุญ

### ุจููุฉ ููู ุงูุฅูุชุงุฌ:
```json
{
  "metadata": {
    "title": "ููุงุชูุญ ุชุฑุฎูุต ูุธุงู ุฅุฏุงุฑุฉ ุงูุนูุงุฏุฉ",
    "version": "1.0.0",
    "totalKeys": 1000,
    "generatedAt": "2025-01-01T00:00:00.000Z"
  },
  "licenses": [
    {
      "id": "unique-id",
      "key": "XXXXX-XXXXX-XXXXX-XXXXX",
      "hash": "sha256-hash",
      "metadata": {
        "licenseType": "STANDARD",
        "region": "GLOBAL",
        "isLifetime": true,
        "maxDevices": 1
      }
    }
  ]
}
```

## 6. ุฅุนุฏุงุฏุงุช ุงูุฃูุงู

### ุงูุชุดููุฑ:
- **ุฎูุงุฑุฒููุฉ**: AES-256-GCM
- **ููุชุงุญ ุงูุงุดุชูุงู**: PBKDF2 ูุน 100,000 ุชูุฑุงุฑ
- **ุงูููุญ**: ููุญ ูุฑูุฏ ููุชุทุจูู
- **ุงูููุงุชูุญ ุงูุนุดูุงุฆูุฉ**: ุงุณุชุฎุฏุงู `crypto.randomBytes()`

### ุงูุชุญูู:
- **ุชูุณูู ุงูููุชุงุญ**: regex ููุชุญูู ูู ุงูุชูุณูู
- **ุฑุจุท ุงูุฌูุงุฒ**: ููุงุฑูุฉ ูุนุฑู ุงูุฌูุงุฒ
- **ุงูุชูููุช**: ุชุชุจุน ุฃููุงุช ุงูุชูุนูู ูุงูุชุญูู

## 7. ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุดุงุดุฉ ุงูุชูุนูู:
- ุญูู ุฅุฏุฎุงู ููุชุงุญ ุงูุชุฑุฎูุต
- ุนุฑุถ ูุนุฑู ุงูุฌูุงุฒ
- ุฑุณุงุฆู ุงูุญุงูุฉ ูุงูุฃุฎุทุงุก
- ุฃุฒุฑุงุฑ ุงูุชูุนูู ูุงูุฅูุบุงุก

### ุดุงุดุฉ ูุนูููุงุช ุงูุชุฑุฎูุต:
- ุชูุงุตูู ุงูุชุฑุฎูุต ุงูุญุงูู
- ุญุงูุฉ ุงูุชูุนูู
- ูุนูููุงุช ุงูุฌูุงุฒ
- ุฎูุงุฑุงุช ุงูุฅุฏุงุฑุฉ

## 8. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุฃููุงุน ุงูุฃุฎุทุงุก:
- ุชูุณูู ููุชุงุญ ุบูุฑ ุตุญูุญ
- ููุชุงุญ ูุณุชุฎุฏู ุนูู ุฌูุงุฒ ุขุฎุฑ
- ููุชุงุญ ุบูุฑ ุตุงูุญ ุฃู ููุชูู ุงูุตูุงุญูุฉ
- ุฃุฎุทุงุก ุงูุชุดููุฑ ูุงูุชุฎุฒูู
- ุฃุฎุทุงุก ุงูุดุจูุฉ (ุฅู ูุฌุฏุช)

## 9. ุงูุชูุงูู ูุน Electron

### ุงููููุงุช ุงููุทููุจุฉ:
- `licenseManager.js` - ุงููุฏูุฑ ุงูุฑุฆูุณู
- `productionLicenseValidator.js` - ูุฏูู ุงูุฅูุชุงุฌ
- `usedLicensesTracker.js` - ูุชุชุจุน ุงูุงุณุชุฎุฏุงู
- `deviceBoundLicenseGenerator.js` - ูููุฏ ุงูููุงุชูุญ ุงููุฑุชุจุทุฉ
- `predefinedLicenses.js` - ุงูููุงุชูุญ ุงููุญุฏุฏุฉ ูุณุจูุงู

### ุงูุชุจุนูุงุช ุงููุทููุจุฉ:
```json
{
  "node-machine-id": "^1.1.12",
  "electron-store": "^8.1.0",
  "crypto": "built-in"
}
```

## 10. ุงุฎุชุจุงุฑ ุงููุธุงู

### ุณูุฑูุจุช ุงูุงุฎุชุจุงุฑ:
- ุงุฎุชุจุงุฑ ุฅูุดุงุก ุงูููุงุชูุญ
- ุงุฎุชุจุงุฑ ุงูุชูุนูู ูุงูุชุญูู
- ุงุฎุชุจุงุฑ ุงูุฃูุงู ูุงูุชุดููุฑ
- ุงุฎุชุจุงุฑ ููุน ุงูุงุณุชุฎุฏุงู ุงููุชูุฑุฑ

## ููุงุญุธุงุช ูููุฉ:
1. **ุงูุฃูุงู ุฃููุงู**: ุงุณุชุฎุฏู ุฃููู ุทุฑู ุงูุชุดููุฑ ุงููุชุงุญุฉ
2. **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**: ูุงุฌูุฉ ุจุณูุทุฉ ููุงุถุญุฉ ูููุณุชุฎุฏู
3. **ุงููุฑููุฉ**: ุฏุนู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุชุฑุงุฎูุต
4. **ุงูููุซูููุฉ**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
5. **ุงูุฃุฏุงุก**: ุนูููุงุช ุณุฑูุนุฉ ููุนุงูุฉ
6. **ุงูุชูุงูู**: ูุนูู ุนูู ุฌููุน ุฃูุธูุฉ ุงูุชุดุบูู ุงููุฏุนููุฉ ุจู Electron

ูุฐุง ุงููุธุงู ูููุฑ ุญูุงูุฉ ุดุงููุฉ ูุขููุฉ ูุชุทุจููู ูุน ุณูููุฉ ูู ุงูุงุณุชุฎุฏุงู ูุงูุฅุฏุงุฑุฉ.

---

## ุฃูุซูุฉ ุนูููุฉ ููุชุทุจูู

### 1. ูุซุงู ุนูู ุฅูุดุงุก ูุฏูุฑ ุงูุชุฑุงุฎูุต:

```javascript
const { machineIdSync } = require('node-machine-id')
const { createHash, createCipheriv, createDecipheriv, randomBytes, pbkdf2Sync } = require('crypto')
const Store = require('electron-store')
const { app } = require('electron')

class LicenseManager {
  constructor() {
    this.currentHWID = this.generateHWID()
    this.licenseStore = new Store({
      name: 'license-data',
      encryptionKey: 'your-app-license-encryption-key-2025',
      cwd: app.getPath('userData')
    })
  }

  generateHWID() {
    try {
      const machineId = machineIdSync()
      const hash = createHash('sha256')
      hash.update(machineId + 'your-app-salt-2025')
      return hash.digest('hex').substring(0, 32)
    } catch (error) {
      console.error('Error generating HWID:', error)
      const fallbackData = `${process.platform}-${process.arch}-${Date.now()}`
      const hash = createHash('sha256')
      hash.update(fallbackData + 'your-app-salt-2025')
      return hash.digest('hex').substring(0, 32)
    }
  }

  validateLicenseFormat(licenseKey) {
    const regex = /^[A-Z0-9]{4,5}-[A-Z0-9]{4,5}-[A-Z0-9]{4,5}-[A-Z0-9]{4,5}$/
    return regex.test(licenseKey?.trim()?.toUpperCase())
  }

  async activateLicense(licenseKey) {
    if (!this.validateLicenseFormat(licenseKey)) {
      return { isValid: false, error: 'ุชูุณูู ููุชุงุญ ุงูุชุฑุฎูุต ุบูุฑ ุตุญูุญ' }
    }

    // ุงูุชุญูู ูู ุตุญุฉ ุงูููุชุงุญ (ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃู ููู)
    const isValidKey = await this.verifyLicenseKey(licenseKey)
    if (!isValidKey) {
      return { isValid: false, error: 'ููุชุงุญ ุงูุชุฑุฎูุต ุบูุฑ ุตุงูุญ' }
    }

    // ุงูุชุญูู ูู ุนุฏู ุงูุงุณุชุฎุฏุงู ุงููุณุจู
    const isAvailable = await this.checkLicenseAvailability(licenseKey)
    if (!isAvailable) {
      return { isValid: false, error: 'ููุชุงุญ ุงูุชุฑุฎูุต ูุณุชุฎุฏู ุนูู ุฌูุงุฒ ุขุฎุฑ' }
    }

    // ุญูุธ ุงูุชุฑุฎูุต
    const success = await this.storeLicense(licenseKey, this.currentHWID)
    if (success) {
      return {
        isValid: true,
        licenseData: {
          license: licenseKey.trim().toUpperCase(),
          hwid: this.currentHWID,
          timestamp: Date.now(),
          activated: true
        }
      }
    }

    return { isValid: false, error: 'ูุดู ูู ุญูุธ ุจูุงูุงุช ุงูุชุฑุฎูุต' }
  }
}
```

### 2. ูุซุงู ุนูู ูููุฏ ุงูููุงุชูุญ:

```javascript
const crypto = require('crypto')

class LicenseKeyGenerator {
  constructor() {
    this.charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'
    this.segmentLength = 5
    this.segmentCount = 4
  }

  generateSecureRandomChar() {
    const randomBytes = crypto.randomBytes(1)
    const randomIndex = randomBytes[0] % this.charset.length
    return this.charset[randomIndex]
  }

  generateSegment() {
    let segment = ''
    for (let i = 0; i < this.segmentLength; i++) {
      segment += this.generateSecureRandomChar()
    }
    return segment
  }

  generateLicenseKey() {
    const segments = []
    for (let i = 0; i < this.segmentCount; i++) {
      segments.push(this.generateSegment())
    }
    return segments.join('-')
  }

  generateMultipleLicenses(count = 100) {
    const licenses = []
    const existingKeys = new Set()

    for (let i = 0; i < count; i++) {
      let licenseKey
      let attempts = 0

      do {
        licenseKey = this.generateLicenseKey()
        attempts++
        if (attempts > 100) {
          throw new Error('ูุดู ูู ุฅูุดุงุก ููุชุงุญ ูุฑูุฏ')
        }
      } while (existingKeys.has(licenseKey))

      existingKeys.add(licenseKey)
      licenses.push({
        id: crypto.randomUUID(),
        key: licenseKey,
        hash: crypto.createHash('sha256').update(licenseKey).digest('hex'),
        metadata: {
          licenseType: 'STANDARD',
          region: 'GLOBAL',
          isLifetime: true,
          maxDevices: 1,
          createdAt: new Date().toISOString()
        }
      })
    }

    return licenses
  }
}
```

### 3. ูุซุงู ุนูู ูุธุงู ุงูุชุชุจุน:

```javascript
const crypto = require('crypto')
const fs = require('fs')
const path = require('path')

class UsedLicensesTracker {
  constructor() {
    this.usedLicensesFile = path.join(__dirname, 'used-licenses.json')
    this.usedLicenses = this.loadUsedLicenses()
  }

  hashLicenseKey(licenseKey) {
    return crypto.createHash('sha256').update(licenseKey).digest('hex')
  }

  loadUsedLicenses() {
    try {
      if (fs.existsSync(this.usedLicensesFile)) {
        const data = JSON.parse(fs.readFileSync(this.usedLicensesFile, 'utf8'))
        return data.usedLicenses || {}
      }
    } catch (error) {
      console.error('Error loading used licenses:', error)
    }
    return {}
  }

  saveUsedLicenses() {
    try {
      const data = {
        metadata: {
          title: 'Used License Keys Tracker',
          lastUpdated: new Date().toISOString(),
          totalUsedKeys: Object.keys(this.usedLicenses).length
        },
        usedLicenses: this.usedLicenses
      }
      fs.writeFileSync(this.usedLicensesFile, JSON.stringify(data, null, 2), 'utf8')
      return true
    } catch (error) {
      console.error('Error saving used licenses:', error)
      return false
    }
  }

  isLicenseAvailable(licenseKey, currentHWID) {
    const hashedKey = this.hashLicenseKey(licenseKey.trim().toUpperCase())
    const usedLicense = this.usedLicenses[hashedKey]

    if (!usedLicense) {
      return true // ุงูููุชุงุญ ุบูุฑ ููุณุชุฎุฏู
    }

    // ุงูุชุญูู ูู ุฃู ููุณ ุงูุฌูุงุฒ
    return usedLicense.hwid === currentHWID
  }

  markLicenseAsUsed(licenseKey, hwid, additionalData = {}) {
    const hashedKey = this.hashLicenseKey(licenseKey.trim().toUpperCase())
    const now = new Date().toISOString()

    this.usedLicenses[hashedKey] = {
      hwid: hwid,
      activatedAt: now,
      lastValidated: now,
      activationCount: (this.usedLicenses[hashedKey]?.activationCount || 0) + 1,
      ...additionalData
    }

    return this.saveUsedLicenses()
  }
}
```

### 4. ูุซุงู ุนูู ุงูุชูุงูู ูุน ูุงุฌูุฉ ุงููุณุชุฎุฏู:

```javascript
// ูู ููู renderer process
const { ipcRenderer } = require('electron')

class LicenseUI {
  constructor() {
    this.initializeUI()
  }

  initializeUI() {
    // ุนุฑุถ ูุนุฑู ุงูุฌูุงุฒ
    this.displayHardwareID()

    // ุฑุจุท ุฃุญุฏุงุซ ุงูุฃุฒุฑุงุฑ
    document.getElementById('activateBtn').addEventListener('click', () => {
      this.activateLicense()
    })
  }

  async displayHardwareID() {
    try {
      const hwid = await ipcRenderer.invoke('get-hardware-id')
      document.getElementById('hardwareId').textContent = hwid
    } catch (error) {
      console.error('Error getting hardware ID:', error)
    }
  }

  async activateLicense() {
    const licenseKey = document.getElementById('licenseInput').value.trim()

    if (!licenseKey) {
      this.showError('ูุฑุฌู ุฅุฏุฎุงู ููุชุงุญ ุงูุชุฑุฎูุต')
      return
    }

    this.showLoading(true)

    try {
      const result = await ipcRenderer.invoke('activate-license', licenseKey)

      if (result.isValid) {
        this.showSuccess('ุชู ุชูุนูู ุงูุชุฑุฎูุต ุจูุฌุงุญ!')
        this.displayLicenseInfo(result.licenseData)
      } else {
        this.showError(result.error || 'ูุดู ูู ุชูุนูู ุงูุชุฑุฎูุต')
      }
    } catch (error) {
      this.showError('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชูุนูู ุงูุชุฑุฎูุต')
      console.error('License activation error:', error)
    } finally {
      this.showLoading(false)
    }
  }

  showError(message) {
    const errorDiv = document.getElementById('errorMessage')
    errorDiv.textContent = message
    errorDiv.style.display = 'block'
    setTimeout(() => errorDiv.style.display = 'none', 5000)
  }

  showSuccess(message) {
    const successDiv = document.getElementById('successMessage')
    successDiv.textContent = message
    successDiv.style.display = 'block'
    setTimeout(() => successDiv.style.display = 'none', 5000)
  }

  showLoading(show) {
    document.getElementById('loadingSpinner').style.display = show ? 'block' : 'none'
    document.getElementById('activateBtn').disabled = show
  }
}

// ุชููุฆุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู
new LicenseUI()
```

### 5. ูุซุงู ุนูู HTML ูููุงุฌูุฉ:

```html
<!DOCTYPE html>
<html>
<head>
    <title>ุชูุนูู ุงูุชุฑุฎูุต</title>
    <style>
        .container { max-width: 500px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"] { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007cba; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        .error { color: red; background: #ffe6e6; padding: 10px; border-radius: 4px; display: none; }
        .success { color: green; background: #e6ffe6; padding: 10px; border-radius: 4px; display: none; }
        .hardware-id { background: #f5f5f5; padding: 10px; border-radius: 4px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ุชูุนูู ุชุฑุฎูุต ุงููุธุงู</h2>

        <div class="form-group">
            <label>ูุนุฑู ุงูุฌูุงุฒ:</label>
            <div class="hardware-id" id="hardwareId">ุฌุงุฑู ุงูุชุญููู...</div>
        </div>

        <div class="form-group">
            <label for="licenseInput">ููุชุงุญ ุงูุชุฑุฎูุต:</label>
            <input type="text" id="licenseInput" placeholder="XXXXX-XXXXX-XXXXX-XXXXX" maxlength="23">
        </div>

        <div class="form-group">
            <button id="activateBtn">ุชูุนูู ุงูุชุฑุฎูุต</button>
            <div id="loadingSpinner" style="display: none;">ุฌุงุฑู ุงูุชูุนูู...</div>
        </div>

        <div id="errorMessage" class="error"></div>
        <div id="successMessage" class="success"></div>

        <div id="licenseInfo" style="display: none;">
            <h3>ูุนูููุงุช ุงูุชุฑุฎูุต:</h3>
            <div id="licenseDetails"></div>
        </div>
    </div>

    <script src="license-ui.js"></script>
</body>
</html>
```

## ุฎุทูุงุช ุงูุชุทุจูู:

1. **ุฅูุดุงุก ุงููุฌูุฏ ุงูุฃุณุงุณู**: `license-system/`
2. **ุชุซุจูุช ุงูุชุจุนูุงุช**: `npm install node-machine-id electron-store`
3. **ุฅูุดุงุก ุงููููุงุช ุงูุฃุณุงุณูุฉ** ุญุณุจ ุงูุฃูุซูุฉ ุฃุนูุงู
4. **ุงุฎุชุจุงุฑ ุงููุธุงู** ุจุงุณุชุฎุฏุงู ููุงุชูุญ ุชุฌุฑูุจูุฉ
5. **ุฏูุฌ ุงููุธุงู** ูุน ุชุทุจูู Electron ุงูุฑุฆูุณู
6. **ุฅูุดุงุก ูุงุฌูุฉ ุงููุณุชุฎุฏู** ููุชูุนูู ูุงูุฅุฏุงุฑุฉ

ูุฐุง ุงููุธุงู ูููุฑ ุญูุงูุฉ ุดุงููุฉ ููููุฉ ูุน ุณูููุฉ ูู ุงูุชุทุจูู ูุงูุงุณุชุฎุฏุงู.

---

## ููุฒุงุช ุงูุฃูุงู ุงููุชูุฏูุฉ

### 1. ุญูุงูุฉ ุถุฏ ุงูุชูุงุนุจ:

```javascript
class SecurityManager {
  // ูุญุต ุชูุงูู ุงููููุงุช
  verifyFileIntegrity() {
    const criticalFiles = [
      'licenseManager.js',
      'productionLicenseValidator.js',
      'usedLicensesTracker.js'
    ]

    return criticalFiles.every(file => {
      const content = fs.readFileSync(file, 'utf8')
      const hash = crypto.createHash('sha256').update(content).digest('hex')
      return this.verifyFileHash(file, hash)
    })
  }

  // ูุดู ูุญุงููุงุช ุงูุชุตุญูุญ
  detectDebugging() {
    const startTime = Date.now()
    debugger; // ุณูุชููู ููุง ุฅุฐุง ูุงู ุงููุตุญุญ ููุชูุญุงู
    const endTime = Date.now()

    return (endTime - startTime) > 100 // ุฅุฐุง ุงุณุชุบุฑู ุฃูุซุฑ ูู 100ms
  }

  // ุญูุงูุฉ ุถุฏ ุชุญููู ุงูุฐุงูุฑุฉ
  obfuscateMemory() {
    const dummyData = []
    for (let i = 0; i < 1000; i++) {
      dummyData.push(crypto.randomBytes(32).toString('hex'))
    }
    return dummyData
  }
}
```

### 2. ูุธุงู ุงูุชุญูู ุงููุชุนุฏุฏ ุงููุณุชููุงุช:

```javascript
class MultiLevelValidator {
  async validateLicense(licenseKey, hwid) {
    const validations = [
      this.validateFormat(licenseKey),
      this.validateChecksum(licenseKey),
      this.validateHardwareBinding(licenseKey, hwid),
      this.validateTimeStamp(licenseKey),
      this.validateUsageLimit(licenseKey),
      this.validateRegionalRestrictions(licenseKey)
    ]

    const results = await Promise.all(validations)
    return results.every(result => result.isValid)
  }

  validateChecksum(licenseKey) {
    // ุญุณุงุจ checksum ููุชุญูู ูู ุตุญุฉ ุงูููุชุงุญ
    const segments = licenseKey.split('-')
    const dataSegments = segments.slice(0, -1).join('')
    const checksumSegment = segments[segments.length - 1]

    const calculatedChecksum = this.calculateChecksum(dataSegments)
    return calculatedChecksum === checksumSegment
  }

  calculateChecksum(data) {
    let sum = 0
    for (let i = 0; i < data.length; i++) {
      sum += data.charCodeAt(i) * (i + 1)
    }
    return (sum % 36).toString(36).toUpperCase().padStart(5, '0')
  }
}
```

### 3. ูุธุงู ุงูุญูุงูุฉ ูู ุงููุฑุตูุฉ:

```javascript
class AntiPiracySystem {
  constructor() {
    this.suspiciousActivities = []
    this.maxSuspiciousActivities = 5
  }

  // ูุฑุงูุจุฉ ุงูุฃูุดุทุฉ ุงููุดุจููุฉ
  monitorSuspiciousActivity() {
    setInterval(() => {
      if (this.detectVirtualMachine()) {
        this.logSuspiciousActivity('Virtual Machine Detected')
      }

      if (this.detectMultipleInstances()) {
        this.logSuspiciousActivity('Multiple Instances Running')
      }

      if (this.detectTimeManipulation()) {
        this.logSuspiciousActivity('System Time Manipulation')
      }
    }, 30000) // ูู 30 ุซุงููุฉ
  }

  detectVirtualMachine() {
    const vmIndicators = [
      process.env.VBOX_USER_HOME,
      process.env.VMWARE_USER,
      process.platform === 'linux' && fs.existsSync('/proc/vz'),
      process.platform === 'win32' && this.checkWindowsVM()
    ]

    return vmIndicators.some(indicator => indicator)
  }

  detectMultipleInstances() {
    // ูุญุต ุงูุนูููุงุช ุงูุฌุงุฑูุฉ ููุจุญุซ ุนู ูุณุฎ ูุชุนุฏุฏุฉ
    const { execSync } = require('child_process')
    try {
      const processes = execSync('tasklist', { encoding: 'utf8' })
      const appProcesses = processes.split('\n').filter(line =>
        line.includes('your-app-name.exe')
      )
      return appProcesses.length > 1
    } catch (error) {
      return false
    }
  }

  logSuspiciousActivity(activity) {
    this.suspiciousActivities.push({
      activity,
      timestamp: Date.now(),
      hwid: this.getCurrentHWID()
    })

    if (this.suspiciousActivities.length >= this.maxSuspiciousActivities) {
      this.triggerSecurityResponse()
    }
  }

  triggerSecurityResponse() {
    // ุฅุฌุฑุงุกุงุช ุงูุฃูุงู ุนูุฏ ุงูุชุดุงู ุฃูุดุทุฉ ูุดุจููุฉ
    console.warn('๐จ Security Alert: Suspicious activities detected')

    // ูููู ุฅุถุงูุฉ ุฅุฌุฑุงุกุงุช ูุซู:
    // - ุฅุฑุณุงู ุชูุฑูุฑ ููุฎุงุฏู
    // - ุชุนุทูู ุงูุชุฑุฎูุต ูุคูุชุงู
    // - ุทูุจ ุฅุนุงุฏุฉ ุชูุนูู
  }
}
```

### 4. ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู ูุงูุงุณุชุนุงุฏุฉ:

```javascript
class LicenseBackupManager {
  constructor() {
    this.backupPath = path.join(app.getPath('userData'), 'license-backup')
    this.ensureBackupDirectory()
  }

  ensureBackupDirectory() {
    if (!fs.existsSync(this.backupPath)) {
      fs.mkdirSync(this.backupPath, { recursive: true })
    }
  }

  // ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุดูุฑุฉ
  createBackup(licenseData) {
    const backupData = {
      timestamp: Date.now(),
      version: '1.0.0',
      licenseData: this.encryptBackupData(licenseData),
      checksum: this.calculateBackupChecksum(licenseData)
    }

    const backupFile = path.join(this.backupPath, `license-backup-${Date.now()}.json`)
    fs.writeFileSync(backupFile, JSON.stringify(backupData, null, 2))

    // ุงูุงุญุชูุงุธ ุจุขุฎุฑ 5 ูุณุฎ ุงุญุชูุงุทูุฉ ููุท
    this.cleanOldBackups()

    return backupFile
  }

  // ุงุณุชุนุงุฏุฉ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ
  restoreFromBackup(backupFile) {
    try {
      const backupData = JSON.parse(fs.readFileSync(backupFile, 'utf8'))
      const decryptedData = this.decryptBackupData(backupData.licenseData)

      // ุงูุชุญูู ูู ุชูุงูู ุงูุจูุงูุงุช
      const calculatedChecksum = this.calculateBackupChecksum(decryptedData)
      if (calculatedChecksum !== backupData.checksum) {
        throw new Error('Backup data integrity check failed')
      }

      return decryptedData
    } catch (error) {
      console.error('Error restoring from backup:', error)
      return null
    }
  }

  cleanOldBackups() {
    const backupFiles = fs.readdirSync(this.backupPath)
      .filter(file => file.startsWith('license-backup-'))
      .map(file => ({
        name: file,
        path: path.join(this.backupPath, file),
        mtime: fs.statSync(path.join(this.backupPath, file)).mtime
      }))
      .sort((a, b) => b.mtime - a.mtime)

    // ุญุฐู ุงููููุงุช ุงูุฒุงุฆุฏุฉ ุนู 5
    if (backupFiles.length > 5) {
      backupFiles.slice(5).forEach(file => {
        fs.unlinkSync(file.path)
      })
    }
  }
}
```

### 5. ูุธุงู ุงูุชุญุฏูุซ ุงูุขูู ููุชุฑุงุฎูุต:

```javascript
class LicenseUpdateManager {
  constructor() {
    this.updateServerUrl = 'https://your-license-server.com/api'
    this.publicKey = this.loadPublicKey()
  }

  // ุงูุชุญูู ูู ุงูุชุญุฏูุซุงุช
  async checkForUpdates(currentLicense) {
    try {
      const response = await fetch(`${this.updateServerUrl}/check-updates`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          licenseKey: currentLicense.key,
          hwid: currentLicense.hwid,
          version: currentLicense.version
        })
      })

      const updateInfo = await response.json()

      if (updateInfo.hasUpdate) {
        return this.verifyUpdateSignature(updateInfo)
      }

      return { hasUpdate: false }
    } catch (error) {
      console.error('Error checking for updates:', error)
      return { hasUpdate: false, error: error.message }
    }
  }

  // ุงูุชุญูู ูู ุชูููุน ุงูุชุญุฏูุซ
  verifyUpdateSignature(updateInfo) {
    const { signature, data } = updateInfo
    const verifier = crypto.createVerify('RSA-SHA256')
    verifier.update(JSON.stringify(data))

    const isValid = verifier.verify(this.publicKey, signature, 'base64')

    if (isValid) {
      return { hasUpdate: true, updateData: data }
    } else {
      throw new Error('Invalid update signature')
    }
  }

  // ุชุทุจูู ุงูุชุญุฏูุซ
  async applyUpdate(updateData) {
    // ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุงูุชุญุฏูุซ
    const backupManager = new LicenseBackupManager()
    const currentLicense = await this.getCurrentLicense()
    backupManager.createBackup(currentLicense)

    try {
      // ุชุทุจูู ุงูุชุญุฏูุซ
      await this.updateLicenseData(updateData)
      return { success: true }
    } catch (error) {
      // ุงุณุชุนุงุฏุฉ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูู ุญุงูุฉ ุงููุดู
      await this.rollbackUpdate(backupManager)
      throw error
    }
  }
}
```

### 6. ูุฑุงูุจุฉ ุงูุฃุฏุงุก ูุงูุฅุญุตุงุฆูุงุช:

```javascript
class LicenseAnalytics {
  constructor() {
    this.metrics = {
      activationAttempts: 0,
      successfulActivations: 0,
      failedActivations: 0,
      validationChecks: 0,
      suspiciousActivities: 0,
      lastActivity: null
    }
  }

  // ุชุณุฌูู ูุญุงููุฉ ุงูุชูุนูู
  logActivationAttempt(licenseKey, success, error = null) {
    this.metrics.activationAttempts++
    this.metrics.lastActivity = Date.now()

    if (success) {
      this.metrics.successfulActivations++
    } else {
      this.metrics.failedActivations++
      this.logFailureReason(error)
    }

    this.saveMetrics()
  }

  // ุชุณุฌูู ูุญุต ุงูุชุญูู
  logValidationCheck(isValid) {
    this.metrics.validationChecks++
    this.metrics.lastActivity = Date.now()

    if (!isValid) {
      this.metrics.suspiciousActivities++
    }

    this.saveMetrics()
  }

  // ุฅูุดุงุก ุชูุฑูุฑ ุงูุงุณุชุฎุฏุงู
  generateUsageReport() {
    const uptime = Date.now() - (this.metrics.firstActivation || Date.now())

    return {
      totalActivationAttempts: this.metrics.activationAttempts,
      successRate: (this.metrics.successfulActivations / this.metrics.activationAttempts * 100).toFixed(2),
      totalValidationChecks: this.metrics.validationChecks,
      suspiciousActivities: this.metrics.suspiciousActivities,
      uptime: this.formatUptime(uptime),
      lastActivity: new Date(this.metrics.lastActivity).toISOString()
    }
  }

  formatUptime(milliseconds) {
    const seconds = Math.floor(milliseconds / 1000)
    const minutes = Math.floor(seconds / 60)
    const hours = Math.floor(minutes / 60)
    const days = Math.floor(hours / 24)

    return `${days}d ${hours % 24}h ${minutes % 60}m ${seconds % 60}s`
  }
}
```

## ูุตุงุฆุญ ููุชุทุจูู ุงูุขูู:

### 1. **ุฅุฎูุงุก ุงูููุฏ ุงูุญุณุงุณ**:
- ุงุณุชุฎุฏู ุฃุฏูุงุช obfuscation ููููุฏ ุงูุญุณุงุณ
- ุงุนุชูุฏ ุนูู native modules ููุนูููุงุช ุงูุญุฑุฌุฉ
- ุงุญูุธ ุงูููุงุชูุญ ุงูุญุณุงุณุฉ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ

### 2. **ูุฑุงูุจุฉ ุงููุธุงู**:
- ุฑุงูุจ ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ูุงููุนุงูุฌ
- ุงูุชุดู ูุญุงููุงุช ุงูุชุตุญูุญ ูุงูุชุญููู
- ุณุฌู ุฌููุน ุงูุฃูุดุทุฉ ุงููุดุจููุฉ

### 3. **ุงูุชุญุฏูุซ ุงูุขูู**:
- ุงุณุชุฎุฏู ุงูุชูููุน ุงูุฑููู ููุชุญุฏูุซุงุช
- ุชุญูู ูู ุชูุงูู ุงููููุงุช ูุจู ุงูุชุทุจูู
- ุงุญุชูุธ ุจูุณุฎ ุงุญุชูุงุทูุฉ ูุจู ุฃู ุชุญุฏูุซ

### 4. **ุงูุงุชุตุงู ุงูุขูู**:
- ุงุณุชุฎุฏู HTTPS ูุฌููุน ุงูุงุชุตุงูุงุช
- ุทุจู certificate pinning
- ุงุนุชูุฏ ุนูู ุงูุชุดููุฑ ูู ุทุฑู ุฅูู ุทุฑู

ูุฐุง ุงููุธุงู ุงููุชูุฏู ูููุฑ ุญูุงูุฉ ุดุงููุฉ ููุชุนุฏุฏุฉ ุงููุณุชููุงุช ุถุฏ ุฌููุน ุฃููุงุน ุงููุฑุตูุฉ ูุงูุชูุงุนุจ.

---

## ูููุงุช ุงูุชูููู ูุงูุจูุงูุงุช

### 1. ููู package.json ููุชุจุนูุงุช:

```json
{
  "name": "secure-license-system",
  "version": "1.0.0",
  "description": "ูุธุงู ุชุฑุฎูุต ุขูู ููุชูุฏู",
  "main": "main.js",
  "dependencies": {
    "electron": "^22.0.0",
    "electron-store": "^8.1.0",
    "node-machine-id": "^1.1.12"
  },
  "devDependencies": {
    "electron-builder": "^24.0.0",
    "jest": "^29.0.0"
  },
  "scripts": {
    "start": "electron .",
    "build": "electron-builder",
    "test": "jest",
    "generate-licenses": "node scripts/generateProductionLicenses.js",
    "test-license-system": "node scripts/testLicenseSystem.js"
  }
}
```

### 2. ููู ุฅุนุฏุงุฏุงุช ุงููุธุงู (config.json):

```json
{
  "license": {
    "format": {
      "regex": "^[A-Z0-9]{4,5}-[A-Z0-9]{4,5}-[A-Z0-9]{4,5}-[A-Z0-9]{4,5}$",
      "segmentLength": 5,
      "segmentCount": 4,
      "separator": "-"
    },
    "encryption": {
      "algorithm": "aes-256-gcm",
      "keyDerivationIterations": 100000,
      "saltLength": 32
    },
    "security": {
      "maxActivationAttempts": 5,
      "suspiciousActivityThreshold": 3,
      "validationInterval": 300000,
      "backupRetentionDays": 30
    },
    "features": {
      "hardwareBinding": true,
      "antiDebugging": true,
      "virtualMachineDetection": true,
      "multiInstancePrevention": true,
      "automaticBackup": true
    }
  },
  "server": {
    "updateCheckUrl": "https://your-server.com/api/license/check",
    "activationUrl": "https://your-server.com/api/license/activate",
    "validationUrl": "https://your-server.com/api/license/validate",
    "timeout": 30000,
    "retryAttempts": 3
  }
}
```

### 3. ุณูุฑูุจุช ุงุฎุชุจุงุฑ ุดุงูู:

```javascript
// scripts/testLicenseSystem.js
const LicenseManager = require('../electron/licenseManager')
const LicenseKeyGenerator = require('../scripts/licenseGenerator')
const UsedLicensesTracker = require('../electron/usedLicensesTracker')

class LicenseSystemTester {
  constructor() {
    this.licenseManager = new LicenseManager()
    this.keyGenerator = new LicenseKeyGenerator()
    this.tracker = new UsedLicensesTracker()
    this.testResults = []
  }

  async runAllTests() {
    console.log('๐งช ุจุฏุก ุงุฎุชุจุงุฑ ูุธุงู ุงูุชุฑุงุฎูุต ุงูุดุงูู...\n')

    await this.testKeyGeneration()
    await this.testLicenseActivation()
    await this.testHardwareBinding()
    await this.testSecurityFeatures()
    await this.testErrorHandling()
    await this.testPerformance()

    this.generateTestReport()
  }

  async testKeyGeneration() {
    console.log('๐ ุงุฎุชุจุงุฑ ุชูููุฏ ุงูููุงุชูุญ...')

    try {
      // ุงุฎุชุจุงุฑ ุชูููุฏ ููุชุงุญ ูุงุญุฏ
      const singleKey = this.keyGenerator.generateLicenseKey()
      this.assert(
        this.licenseManager.validateLicenseFormat(singleKey),
        'ุชูููุฏ ููุชุงุญ ูุงุญุฏ ุตุญูุญ'
      )

      // ุงุฎุชุจุงุฑ ุชูููุฏ ููุงุชูุญ ูุชุนุฏุฏุฉ
      const multipleKeys = this.keyGenerator.generateMultipleLicenses(10)
      this.assert(
        multipleKeys.length === 10,
        'ุชูููุฏ 10 ููุงุชูุญ'
      )

      // ุงุฎุชุจุงุฑ ุนุฏู ุงูุชูุฑุงุฑ
      const keySet = new Set(multipleKeys.map(k => k.key))
      this.assert(
        keySet.size === multipleKeys.length,
        'ุนุฏู ุชูุฑุงุฑ ุงูููุงุชูุญ'
      )

      console.log('โ ุงุฎุชุจุงุฑ ุชูููุฏ ุงูููุงุชูุญ ูุฌุญ\n')
    } catch (error) {
      console.error('โ ูุดู ุงุฎุชุจุงุฑ ุชูููุฏ ุงูููุงุชูุญ:', error.message)
    }
  }

  async testLicenseActivation() {
    console.log('๐ ุงุฎุชุจุงุฑ ุชูุนูู ุงูุชุฑุงุฎูุต...')

    try {
      // ุฅูุดุงุก ููุชุงุญ ุงุฎุชุจุงุฑ
      const testKey = 'TEST1-ABCDE-12345-FGHIJ'

      // ุงุฎุชุจุงุฑ ุงูุชูุนูู ุงููุงุฌุญ
      const activationResult = await this.licenseManager.activateLicense(testKey)
      this.assert(
        activationResult.isValid,
        'ุชูุนูู ููุชุงุญ ุตุญูุญ'
      )

      // ุงุฎุชุจุงุฑ ุงูุชุญูู ูู ุงูุชุฑุฎูุต ุงููุญููุธ
      const validationResult = await this.licenseManager.validateStoredLicense()
      this.assert(
        validationResult.isValid,
        'ุงูุชุญูู ูู ุงูุชุฑุฎูุต ุงููุญููุธ'
      )

      console.log('โ ุงุฎุชุจุงุฑ ุชูุนูู ุงูุชุฑุงุฎูุต ูุฌุญ\n')
    } catch (error) {
      console.error('โ ูุดู ุงุฎุชุจุงุฑ ุชูุนูู ุงูุชุฑุงุฎูุต:', error.message)
    }
  }

  async testHardwareBinding() {
    console.log('๐ ุงุฎุชุจุงุฑ ุฑุจุท ุงูุฃุฌูุฒุฉ...')

    try {
      // ุงูุญุตูู ุนูู ูุนุฑู ุงูุฌูุงุฒ
      const hwid = this.licenseManager.generateHWID()
      this.assert(
        hwid && hwid.length === 32,
        'ุชูููุฏ ูุนุฑู ุฌูุงุฒ ุตุญูุญ'
      )

      // ุงุฎุชุจุงุฑ ุฑุจุท ุงูููุชุงุญ ุจุงูุฌูุงุฒ
      const testKey = 'HWTEST-12345-ABCDE-FGHIJ'
      const bindingResult = await this.licenseManager.activateLicense(testKey)

      this.assert(
        bindingResult.isValid && bindingResult.licenseData.hwid === hwid,
        'ุฑุจุท ุงูููุชุงุญ ุจุงูุฌูุงุฒ'
      )

      console.log('โ ุงุฎุชุจุงุฑ ุฑุจุท ุงูุฃุฌูุฒุฉ ูุฌุญ\n')
    } catch (error) {
      console.error('โ ูุดู ุงุฎุชุจุงุฑ ุฑุจุท ุงูุฃุฌูุฒุฉ:', error.message)
    }
  }

  async testSecurityFeatures() {
    console.log('๐ก๏ธ ุงุฎุชุจุงุฑ ููุฒุงุช ุงูุฃูุงู...')

    try {
      // ุงุฎุชุจุงุฑ ุงูุชุดููุฑ ููู ุงูุชุดููุฑ
      const testData = { test: 'data', number: 123 }
      const encrypted = this.licenseManager.encryptLicenseData(testData)
      const decrypted = this.licenseManager.decryptLicenseData(encrypted)

      this.assert(
        JSON.stringify(testData) === JSON.stringify(decrypted),
        'ุชุดููุฑ ููู ุชุดููุฑ ุงูุจูุงูุงุช'
      )

      // ุงุฎุชุจุงุฑ ูุดู ุงูุชูุงุนุจ
      const invalidFormat = 'INVALID-FORMAT'
      const formatValidation = this.licenseManager.validateLicenseFormat(invalidFormat)
      this.assert(
        !formatValidation,
        'ุฑูุถ ุงูุชูุณูู ุบูุฑ ุงูุตุญูุญ'
      )

      console.log('โ ุงุฎุชุจุงุฑ ููุฒุงุช ุงูุฃูุงู ูุฌุญ\n')
    } catch (error) {
      console.error('โ ูุดู ุงุฎุชุจุงุฑ ููุฒุงุช ุงูุฃูุงู:', error.message)
    }
  }

  async testErrorHandling() {
    console.log('โ๏ธ ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก...')

    try {
      // ุงุฎุชุจุงุฑ ููุชุงุญ ูุงุฑุบ
      const emptyKeyResult = await this.licenseManager.activateLicense('')
      this.assert(
        !emptyKeyResult.isValid,
        'ุฑูุถ ุงูููุชุงุญ ุงููุงุฑุบ'
      )

      // ุงุฎุชุจุงุฑ ููุชุงุญ ุจุชูุณูู ุฎุงุทุฆ
      const wrongFormatResult = await this.licenseManager.activateLicense('WRONG-FORMAT')
      this.assert(
        !wrongFormatResult.isValid,
        'ุฑูุถ ุงูุชูุณูู ุงูุฎุงุทุฆ'
      )

      console.log('โ ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุฌุญ\n')
    } catch (error) {
      console.error('โ ูุดู ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:', error.message)
    }
  }

  async testPerformance() {
    console.log('โก ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก...')

    try {
      // ุงุฎุชุจุงุฑ ุณุฑุนุฉ ุชูููุฏ ุงูููุงุชูุญ
      const startTime = Date.now()
      this.keyGenerator.generateMultipleLicenses(100)
      const generationTime = Date.now() - startTime

      this.assert(
        generationTime < 5000,
        `ุชูููุฏ 100 ููุชุงุญ ูู ุฃูู ูู 5 ุซูุงู (${generationTime}ms)`
      )

      // ุงุฎุชุจุงุฑ ุณุฑุนุฉ ุงูุชุญูู
      const validationStartTime = Date.now()
      for (let i = 0; i < 100; i++) {
        this.licenseManager.validateLicenseFormat('TEST1-ABCDE-12345-FGHIJ')
      }
      const validationTime = Date.now() - validationStartTime

      this.assert(
        validationTime < 1000,
        `100 ุนูููุฉ ุชุญูู ูู ุฃูู ูู ุซุงููุฉ (${validationTime}ms)`
      )

      console.log('โ ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก ูุฌุญ\n')
    } catch (error) {
      console.error('โ ูุดู ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก:', error.message)
    }
  }

  assert(condition, testName) {
    const result = {
      test: testName,
      passed: condition,
      timestamp: new Date().toISOString()
    }

    this.testResults.push(result)

    if (condition) {
      console.log(`  โ ${testName}`)
    } else {
      console.log(`  โ ${testName}`)
    }
  }

  generateTestReport() {
    const totalTests = this.testResults.length
    const passedTests = this.testResults.filter(r => r.passed).length
    const failedTests = totalTests - passedTests
    const successRate = ((passedTests / totalTests) * 100).toFixed(2)

    console.log('\n' + '='.repeat(60))
    console.log('๐ ุชูุฑูุฑ ุงุฎุชุจุงุฑ ูุธุงู ุงูุชุฑุงุฎูุต')
    console.log('='.repeat(60))
    console.log(`ุฅุฌูุงูู ุงูุงุฎุชุจุงุฑุงุช: ${totalTests}`)
    console.log(`ุงูุงุฎุชุจุงุฑุงุช ุงููุงุฌุญุฉ: ${passedTests}`)
    console.log(`ุงูุงุฎุชุจุงุฑุงุช ุงููุงุดูุฉ: ${failedTests}`)
    console.log(`ูุนุฏู ุงููุฌุงุญ: ${successRate}%`)
    console.log('='.repeat(60))

    if (failedTests > 0) {
      console.log('\nโ ุงูุงุฎุชุจุงุฑุงุช ุงููุงุดูุฉ:')
      this.testResults
        .filter(r => !r.passed)
        .forEach(r => console.log(`  - ${r.test}`))
    }

    // ุญูุธ ุงูุชูุฑูุฑ ูู ููู
    const reportData = {
      summary: {
        totalTests,
        passedTests,
        failedTests,
        successRate: parseFloat(successRate),
        timestamp: new Date().toISOString()
      },
      results: this.testResults
    }

    require('fs').writeFileSync(
      'test-report.json',
      JSON.stringify(reportData, null, 2)
    )

    console.log('\n๐ ุชู ุญูุธ ุงูุชูุฑูุฑ ูู: test-report.json')
  }
}

// ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
if (require.main === module) {
  const tester = new LicenseSystemTester()
  tester.runAllTests().catch(console.error)
}

module.exports = LicenseSystemTester
```

### 4. ุณูุฑูุจุช ุฅูุดุงุก ููุงุชูุญ ุงูุฅูุชุงุฌ:

```javascript
// scripts/generateProductionLicenses.js
const crypto = require('crypto')
const fs = require('fs')
const path = require('path')

const CONFIG = {
  totalKeys: 1000,
  outputFile: 'production-licenses.json',
  charset: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',
  segmentLength: 5,
  segmentCount: 4
}

class ProductionLicenseGenerator {
  constructor() {
    this.existingKeys = new Set()
  }

  generateSecureLicenseKey() {
    const segments = []
    for (let i = 0; i < CONFIG.segmentCount; i++) {
      segments.push(this.generateSegment())
    }
    return segments.join('-')
  }

  generateSegment() {
    let segment = ''
    for (let i = 0; i < CONFIG.segmentLength; i++) {
      const randomBytes = crypto.randomBytes(1)
      const randomIndex = randomBytes[0] % CONFIG.charset.length
      segment += CONFIG.charset[randomIndex]
    }
    return segment
  }

  generateLicenseMetadata(index) {
    const licenseTypes = ['STANDARD', 'PROFESSIONAL', 'ENTERPRISE', 'PREMIUM']
    const regions = ['GLOBAL', 'MENA', 'GCC', 'SAUDI', 'UAE']

    return {
      keyIndex: index + 1,
      licenseType: licenseTypes[Math.floor(Math.random() * licenseTypes.length)],
      region: regions[Math.floor(Math.random() * regions.length)],
      maxDevices: 1,
      isLifetime: true,
      createdAt: new Date().toISOString(),
      isActive: true,
      isUsed: false
    }
  }

  async generateProductionLicenses() {
    console.log(`๐ ุจุฏุก ุฅูุดุงุก ${CONFIG.totalKeys} ููุชุงุญ ุชุฑุฎูุต ููุฅูุชุงุฌ...`)

    const licenses = []

    for (let i = 0; i < CONFIG.totalKeys; i++) {
      let licenseKey
      let attempts = 0

      // ุงูุชุฃูุฏ ูู ุนุฏู ุงูุชูุฑุงุฑ
      do {
        licenseKey = this.generateSecureLicenseKey()
        attempts++

        if (attempts > 100) {
          throw new Error(`ูุดู ูู ุฅูุดุงุก ููุชุงุญ ูุฑูุฏ ุจุนุฏ ${attempts} ูุญุงููุฉ`)
        }
      } while (this.existingKeys.has(licenseKey))

      this.existingKeys.add(licenseKey)

      const licenseData = {
        id: crypto.randomUUID(),
        key: licenseKey,
        hash: crypto.createHash('sha256').update(licenseKey).digest('hex'),
        metadata: this.generateLicenseMetadata(i)
      }

      licenses.push(licenseData)

      // ุนุฑุถ ุงูุชูุฏู
      if ((i + 1) % 100 === 0) {
        const progress = ((i + 1) / CONFIG.totalKeys * 100).toFixed(1)
        console.log(`๐ ุงูุชูุฏู: ${i + 1}/${CONFIG.totalKeys} (${progress}%)`)
      }
    }

    // ุญูุธ ุงูููุงุชูุญ
    const outputData = {
      metadata: {
        title: 'ููุงุชูุญ ุชุฑุฎูุต ุงูุฅูุชุงุฌ',
        version: '1.0.0',
        generatedAt: new Date().toISOString(),
        totalKeys: licenses.length,
        format: 'XXXXX-XXXXX-XXXXX-XXXXX'
      },
      licenses: licenses
    }

    fs.writeFileSync(CONFIG.outputFile, JSON.stringify(outputData, null, 2))
    console.log(`โ ุชู ุฅูุดุงุก ${licenses.length} ููุชุงุญ ูุญูุธูุง ูู: ${CONFIG.outputFile}`)

    return licenses
  }
}

// ุชุดุบูู ุงููููุฏ
if (require.main === module) {
  const generator = new ProductionLicenseGenerator()
  generator.generateProductionLicenses().catch(console.error)
}

module.exports = ProductionLicenseGenerator
```

## ุฎุทุฉ ุงูุชุทุจูู ุงูููุงุฆูุฉ:

### ุงููุฑุญูุฉ 1: ุงูุฅุนุฏุงุฏ ุงูุฃุณุงุณู
1. ุฅูุดุงุก ูุฌูุฏ ุงููุดุฑูุน
2. ุชุซุจูุช ุงูุชุจุนูุงุช ุงููุทููุจุฉ
3. ุฅุนุฏุงุฏ ูููุงุช ุงูุชูููู

### ุงููุฑุญูุฉ 2: ุชุทููุฑ ุงูููููุงุช ุงูุฃุณุงุณูุฉ
1. ุฅูุดุงุก LicenseManager
2. ุชุทููุฑ ูููุฏ ุงูููุงุชูุญ
3. ุจูุงุก ูุธุงู ุงูุชุชุจุน

### ุงููุฑุญูุฉ 3: ุฅุถุงูุฉ ููุฒุงุช ุงูุฃูุงู
1. ุชุทุจูู ุงูุชุดููุฑ ุงููุชูุฏู
2. ุฅุถุงูุฉ ูุดู ุงูุชูุงุนุจ
3. ุชุทููุฑ ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู

### ุงููุฑุญูุฉ 4: ุงูุงุฎุชุจุงุฑ ูุงูุชุญุณูู
1. ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ุงูุดุงููุฉ
2. ุชุญุณูู ุงูุฃุฏุงุก
3. ุฅุตูุงุญ ุงูุฃุฎุทุงุก

### ุงููุฑุญูุฉ 5: ุงูุชูุงูู ูุงููุดุฑ
1. ุฏูุฌ ุงููุธุงู ูุน ุงูุชุทุจูู ุงูุฑุฆูุณู
2. ุฅูุดุงุก ูุงุฌูุฉ ุงููุณุชุฎุฏู
3. ุฅุนุฏุงุฏ ุงูุชูุฒูุน ุงูุขูู

ูุฐุง ุงููุธุงู ุงูุดุงูู ูููุฑ ุญูุงูุฉ ูููุฉ ููุฑููุฉ ุนุงููุฉ ูุฃู ุชุทุจูู ูุญุชุงุฌ ูุธุงู ุชุฑุฎูุต ูุชูุฏู.
