# ميزة احتياجات العيادة

## نظرة عامة

تم إضافة ميزة جديدة لإدارة احتياجات ومتطلبات العيادة بشكل شامل ومنظم. هذه الميزة تسمح للمستخدمين بتتبع وإدارة جميع المواد والأدوات والمعدات التي تحتاجها العيادة.

## الميزات الرئيسية

### 1. إدارة الاحتياجات
- **إضافة احتياج جديد**: إمكانية إضافة احتياجات جديدة مع جميع التفاصيل المطلوبة
- **تعديل الاحتياجات**: تحديث معلومات الاحتياجات الموجودة
- **حذف الاحتياجات**: إزالة الاحتياجات غير المطلوبة مع تأكيد الحذف
- **عرض تفصيلي**: جدول شامل يعرض جميع معلومات الاحتياجات

### 2. البيانات المدعومة
كل احتياج يحتوي على البيانات التالية:
- **#**: رقم فريد لكل احتياج
- **اسم الاحتياج**: وصف واضح للمادة أو الخدمة المطلوبة
- **الكمية**: العدد المطلوب
- **السعر**: سعر الوحدة الواحدة
- **الوصف**: تفاصيل إضافية (اختياري)
- **الفئة**: تصنيف الاحتياج (أدوات طبية، مواد استهلاكية، إلخ)
- **الأولوية**: مستوى الأهمية (منخفض، متوسط، عالي، عاجل)
- **الحالة**: حالة الطلب (معلق، مطلوب، مستلم، ملغي)
- **المورد**: اسم المورد (اختياري)
- **الملاحظات**: ملاحظات إضافية (اختياري)

### 3. الكاردات الإحصائية
تعرض الصفحة أربع كاردات رئيسية في الأعلى:
- **إجمالي المواد**: العدد الكلي للاحتياجات
- **إجمالي السعر**: القيمة المالية الإجمالية لجميع الاحتياجات
- **المعلق**: عدد الاحتياجات ذات الحالة "معلق"
- **العاجل**: عدد الاحتياجات ذات الأولوية "عاجل"

### 4. نظام الفلترة والبحث
- **البحث النصي**: البحث في أسماء الاحتياجات والأوصاف والفئات
- **فلترة حسب الفئة**: تصفية الاحتياجات حسب الفئة
- **فلترة حسب الأولوية**: عرض الاحتياجات حسب مستوى الأولوية
- **فلترة حسب الحالة**: تصفية حسب حالة الطلب
- **أزرار الفلترة السريعة**: للوصول السريع للفلاتر الشائعة
- **مسح الفلاتر**: إزالة جميع الفلاتر المطبقة

### 5. التصدير
- **تصدير CSV**: تصدير البيانات بصيغة CSV مع دعم اللغة العربية
- **تصدير HTML**: تصدير تقرير منسق بصيغة HTML
- **تصدير البيانات المفلترة**: إمكانية تصدير البيانات المفلترة فقط
- **تصدير جميع البيانات**: تصدير كامل قاعدة البيانات

## الهيكل التقني

### 1. قاعدة البيانات
```sql
CREATE TABLE clinic_needs (
    id TEXT PRIMARY KEY,
    serial_number TEXT UNIQUE NOT NULL,
    need_name TEXT NOT NULL,
    quantity INTEGER NOT NULL DEFAULT 1,
    price DECIMAL(10,2) NOT NULL DEFAULT 0,
    description TEXT,
    category TEXT,
    priority TEXT DEFAULT 'medium',
    status TEXT DEFAULT 'pending',
    supplier TEXT,
    notes TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### 2. المكونات الرئيسية
- **ClinicNeeds.tsx**: الصفحة الرئيسية
- **ClinicNeedsTable.tsx**: جدول عرض البيانات
- **ClinicNeedsFilters.tsx**: مكون الفلترة والبحث
- **AddClinicNeedDialog.tsx**: نافذة إضافة/تعديل الاحتياجات
- **DeleteClinicNeedDialog.tsx**: نافذة تأكيد الحذف
- **ExportClinicNeedsButton.tsx**: مكون التصدير

### 3. إدارة الحالة
- **useClinicNeedsStore**: مخزن Zustand لإدارة حالة الاحتياجات
- **API Integration**: تكامل مع قاعدة البيانات عبر Electron IPC

### 4. واجهات برمجة التطبيقات
```typescript
// الحصول على جميع الاحتياجات
window.electronAPI.clinicNeeds.getAll()

// إضافة احتياج جديد
window.electronAPI.clinicNeeds.create(needData)

// تحديث احتياج
window.electronAPI.clinicNeeds.update(id, needData)

// حذف احتياج
window.electronAPI.clinicNeeds.delete(id)

// البحث في الاحتياجات
window.electronAPI.clinicNeeds.search(query)

// الحصول على الإحصائيات
window.electronAPI.clinicNeeds.getStatistics()
```

## كيفية الاستخدام

### 1. الوصول للميزة
- انتقل إلى تبويبة "احتياجات العيادة" من الشريط الجانبي
- ستظهر الصفحة الرئيسية مع الكاردات الإحصائية والجدول

### 2. إضافة احتياج جديد
1. اضغط على زر "إضافة احتياج جديد"
2. املأ النموذج بالمعلومات المطلوبة
3. اضغط "إضافة" لحفظ الاحتياج

### 3. تعديل احتياج
1. اضغط على زر "تعديل" بجانب الاحتياج المطلوب
2. عدّل المعلومات في النموذج
3. اضغط "تحديث" لحفظ التغييرات

### 4. حذف احتياج
1. اضغط على زر "حذف" بجانب الاحتياج المطلوب
2. أكد الحذف في النافذة المنبثقة

### 5. البحث والفلترة
- استخدم مربع البحث للبحث النصي
- استخدم قوائم الفلترة للتصفية حسب الفئة أو الأولوية أو الحالة
- استخدم الأزرار السريعة للفلاتر الشائعة

### 6. التصدير
1. اضغط على زر "تصدير"
2. اختر نوع التصدير المطلوب (CSV أو HTML)
3. اختر ما إذا كنت تريد تصدير جميع البيانات أو المفلترة فقط

## الفوائد

### 1. تنظيم أفضل
- تتبع منظم لجميع احتياجات العيادة
- تصنيف واضح حسب الفئات والأولويات
- إدارة حالات الطلبات بكفاءة

### 2. توفير الوقت
- بحث سريع وفعال
- فلترة متقدمة للوصول السريع للمعلومات
- واجهة سهلة الاستخدام

### 3. التحكم المالي
- تتبع التكاليف والميزانيات
- حساب إجمالي القيم تلقائياً
- تقارير مالية دقيقة

### 4. اتخاذ القرارات
- إحصائيات واضحة ومفيدة
- تحديد الأولويات بسهولة
- تتبع حالة الطلبات

## التطوير المستقبلي

### ميزات مقترحة للإصدارات القادمة:
1. **تنبيهات تلقائية**: تنبيهات للاحتياجات العاجلة
2. **تكامل مع الموردين**: ربط مباشر مع معلومات الموردين
3. **تتبع الميزانية**: مقارنة مع الميزانية المحددة
4. **تقارير متقدمة**: تقارير تحليلية أكثر تفصيلاً
5. **سجل التغييرات**: تتبع تاريخ التعديلات
6. **الموافقات**: نظام موافقات للطلبات الكبيرة

## الدعم التقني

للحصول على المساعدة أو الإبلاغ عن مشاكل:
- تحقق من سجلات النظام في حالة حدوث أخطاء
- تأكد من صحة البيانات المدخلة
- راجع دليل المستخدم للحصول على تعليمات مفصلة
